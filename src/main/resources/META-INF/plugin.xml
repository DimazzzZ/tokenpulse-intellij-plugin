<?xml version="1.0" encoding="UTF-8"?>
<!-- Plugin Configuration File. Read more: https://plugins.jetbrains.com/docs/intellij/plugin-configuration-file.html -->
<idea-plugin>
    <id>org.zhavoronkov.tokenpulse</id>
    <name>TokenPulse</name>
    <vendor email="support@tokenpulse.com" url="https://github.com/DimazzzZ/token-pulse">TokenPulse</vendor>

    <description><![CDATA[
    <b>TokenPulse</b> aggregates token balances and credit usage across multiple AI providers
    (OpenRouter, Cline) directly in your IDE status bar.<br><br>
    <ul>
        <li>Live credit &amp; token balance in the status bar</li>
        <li>Supports OpenRouter (API Key &amp; Provisioning Key) and Cline (Personal &amp; Org)</li>
        <li>Configurable auto-refresh with TTL caching to avoid rate limits</li>
        <li>Secure API key storage via IntelliJ PasswordSafe</li>
        <li>Dashboard overview with per-account status</li>
    </ul>
    ]]></description>

    <change-notes><![CDATA[
    <b>0.1.0</b> â€” Initial release<br>
    <ul>
        <li>OpenRouter and Cline provider support</li>
        <li>Status bar widget with live aggregate balance</li>
        <li>Settings page with CRUD account management</li>
        <li>Dashboard dialog with per-account details</li>
        <li>TTL caching and single-flight refresh coalescing</li>
        <li>Secure credential storage via IntelliJ PasswordSafe</li>
    </ul>
    ]]></change-notes>

    <depends>com.intellij.modules.platform</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Application services -->
        <!-- Note: Other services are registered automatically via @Service (Light Services) -->
        <applicationService serviceImplementation="org.zhavoronkov.tokenpulse.settings.TokenPulseSettingsService"/>

        <!-- Notifications -->
        <notificationGroup id="TokenPulse" displayType="BALLOON"/>

        <!-- Settings page under Tools -->
        <applicationConfigurable
                parentId="tools"
                instance="org.zhavoronkov.tokenpulse.ui.TokenPulseConfigurable"
                id="org.zhavoronkov.tokenpulse.ui.TokenPulseConfigurable"
                displayName="TokenPulse"/>

        <!-- Status bar widget -->
        <statusBarWidgetFactory
                implementation="org.zhavoronkov.tokenpulse.ui.TokenPulseStatusBarWidgetFactory"
                id="TokenPulse"/>
    </extensions>

    <actions>
        <action id="TokenPulse.ShowDashboard"
                class="org.zhavoronkov.tokenpulse.actions.ShowDashboardAction"
                text="Show TokenPulse Dashboard"
                description="Shows a table with all configured token balances">
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>
        <action id="TokenPulse.RefreshAll"
                class="org.zhavoronkov.tokenpulse.actions.RefreshAllAction"
                text="Refresh All Token Balances"
                description="Force a refresh of all configured account balances"/>
        <action id="TokenPulse.OpenSettings"
                class="org.zhavoronkov.tokenpulse.actions.OpenSettingsAction"
                text="TokenPulse Settings..."
                description="Configure AI provider accounts and refresh interval"/>
    </actions>
</idea-plugin>
